<h1 class="top"><% $ds->name %></h1>

<form action="/domainset/enqueue_domainset.html" method="post">
    <input type="hidden" name="sid" value="<% $id %>">
    <input type="submit" value="Add all <% $ds->domains->count %> domains in set to gathering queue">
</form>

<h2>Add a new domain</h2>
<form action="/com/add_domain_to_set">
    <input type="hidden" name="sid" value="<% $ds->id %>">
    <input type="text" name="name" />
    <input type="submit" value="Add">
</form>

<h1>List of domains in set</h1>
<table>
    <tr>
        <th>Domain</th>
        <th>Action</th>
    </tr>
% foreach my $domain ($ds->domains) {
   <tr class="<% ++$c%2==0?'even':'odd' %>">
    <td><% $domain->domain %></td>
    <td><form action="/com/remove_domain_from_set" method="post">
        <input type="hidden" name="did" value="<% $domain->id %>">
        <input type="hidden" name="sid" value="<% $ds->id %>">
        <input type="submit" value="Remove" />
    </form></td>
    </tr> 
% }
</table>

<%init>
$r->content_type('text/html');
my $c;

my $id = $m->dhandler_arg;
my $ds = $zs->present->dbx('Domainset')->find($id);
unless ($ds) {
    $m->clear_buffer;
    $m->abort(404);
}
</%init>
