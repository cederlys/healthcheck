<a href="/">(Back to top)</a>

<h1>Server data for <% $name %></h1>

<h2>DNS servers hosting most domains</h2>
<p>

    These tables list the individual nameservers that are mentioned in the NS
    records for the largest number of unique domains.

</p>
% foreach my $t (@tid) {
    <img src="<% $zs->present->google_mapchart_url($t, 'DNS') %>">
<& /table/top_servers, kind => 'DNS', trid => $t &>
% }

<h2>Web servers hosting most domains</h2>
<p>

    These tables list the individual servers that host web servers for the
    largest number of domains. The aggregation is done based on IP address,
    and the names shown here the results of reverse lookups on those IPs.

</p>
% foreach my $t (@tid) {
    <img src="<% $zs->present->google_mapchart_url($t, 'HTTP') %>">
<& /table/top_servers, kind => 'HTTP', trid => $t &>
% }

<h2>Mail servers hosting most domains</h2>
<p>

    As for nameservers, this counts the individual servers mentioned most
    often in MX records for domains.

</p>
% foreach my $t (@tid) {
    <img src="<% $zs->present->google_mapchart_url($t, 'SMTP') %>">
<& /table/top_servers, kind => 'SMTP', trid => $t &>
% }

<h2>ASNs hosting most domains (ipv4)</h2>
<p>

    This table (and the next) presents the number of domains that have at
    least one nameserver announced in the given AS. Given big ISPs with
    servers providing information for many domains, the actual number of
    nameservers in a particular AS is likely to be lower than the number of
    domains with nameservers there.

</p>
<& /table/top_asn, sid => \@tid &>

<h2>ASNs hosting most domains (ipv6)</h2>
<& /table/top_asn, sid => \@tid, ipv6 => 1 &>

<%init>
my @tr;
my $name;

my @tid = keys %{$app->session->{testruns}};

if (@tid) {
    @tr = sort {$b->tests->count <=> $a->tests->count} 
        grep {defined($_)} map {$zs->present->dbx('Testrun')->find($_)} @tid;
    if(@tr == 1) {
        $name = $tr[0]->domainset->name;
    } else {
        $name = scalar(@tr) . " sets"
    }
    @tid = map {$_->id} @tr;
} else {
    $m->redirect('/')
}
my $c;
</%init>
<%method title>ZoneStat: Testruns</%method>
