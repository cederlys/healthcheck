<table>
    <tr><th colspan="3"><% $tr->name %></th></tr>
    <tr>
        <th>Count</th>
        <th>Server</th>
        <th>Location</th>
    </tr>
% foreach my $s (@s) {
    <tr class="<% ++$c%2==0?'even':'odd' %>">
        <td>
            <% $s->get_column('count') %>
        </td>
        <td>
            <% $s->reverse %>
        </td>
        <td>
            <a href="http://maps.google.com/maps?q=<% sprintf "%02.2f", $s->latitude %>+<% sprintf "%02.2f", $s->longitude %>" target="_blank">
                <% join ', ', grep {$_} ($s->city, $s->country) %>
            </a>
        </td>
    </tr>
% }
</table>

<%init>
my $tr = $zs->present->dbx('Testrun')->find($trid);
$m->clear_buffers, $m->abort(404) unless defined($tr);

my @s = $zs->present->top_foo_servers($kind, $tr, $count);
my $c;
</%init>
<%args>
$trid
$kind
$count => 25
</%args>
